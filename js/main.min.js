function r(e){/in/.test(document.readyState)?setTimeout("r("+e+")",9):e()}$(window).on("scroll",function(){$(window).scrollTop()}),$(document).ready(function(e){function t(){e(".slider-watch-also").slick({dots:!1,arrow:!1,slidesToShow:3,slidesToScroll:1,responsive:[{breakpoint:99999,settings:"unslick"},{breakpoint:768,settings:{arrow:!0,slidesToShow:2,slidesToScroll:1,infinite:!0}},{breakpoint:577,settings:{slidesToShow:1,slidesToScroll:1,infinite:!0,slide:".col-12"}}]})}e(".searchTerm").on("focus",function(){e(".searchTerm").val("")}),e("#searchMob").click(function(){e("#searchMob, .search-close").addClass("open"),e("#searchMob").keyup(function(){e(".search-clean").show()})}),e(".search-close").click(function(){e("#searchMob, .search-close").removeClass("open"),e("#searchMob").val(""),e(".search-clean").hide()}),e(".search-clean").on("click",function(){e("#searchMob").val("")});window.matchMedia("(min-width: 1000px)");var i=window.matchMedia("(min-width: 991px)"),s=window.matchMedia("(max-width: 575.8px)"),o=window.matchMedia("(max-width: 1100px)"),n=window.matchMedia("(max-height: 900px)");i.matches&&(e(".link").click(function(){if(e(window).scrollTop()<100);else{var t=e(this);e(t).toggleClass("header-menu-open"),e(".header-menu h3").not(this).removeClass("header-menu-open")}}),e(window).on("scroll",function(){e(window).scrollTop()<100&&e(".link").each(function(t,i){e(i).removeClass("header-menu-open")})}),e(window).on("scroll",function(){e(document).scrollTop()>100?(e(".header").addClass("header-fixed"),e(".header-btn .btn").addClass("calendar-none"),e(".header-menu ul").addClass("dis-none")):(e(".header").removeClass("header-fixed"),e(".header-menu ul").removeClass("dis-none"),e(".header-btn .btn").removeClass("calendar-none"))})),e(".donate-btn").click(function(t){t.preventDefault(),e("#overlay").fadeIn(400,function(){e(".popup-thanks").css("display","block").animate({opacity:1,top:"50%"},200)})}),e(".modal_close, #overlay").click(function(){e(".popup-thanks").animate({opacity:0,top:"45%"},200,function(){e(this).css("display","none"),e("#overlay").fadeOut(400)})}),e(".menu-toggle").on("click",function(){e(this).toggleClass("is-active"),e(".header-navigation").slideToggle()});var a=window.matchMedia("(max-width: 991px)");e(function(){if(a.matches){var t=function(e,t){this.el=e||{},this.multiple=t||!1;this.el.find(".link").on("click",{el:this.el,multiple:this.multiple},this.dropdown)};t.prototype.dropdown=function(t){var i=t.data.el;$this=e(this),$next=$this.next(),$next.slideToggle(),$this.parent().toggleClass("open"),t.data.multiple||i.find(".submenu").not($next).slideUp().parent().removeClass("open")};new t(e("#accordion"),!1)}});var l=e(".header").height();e(".main").css("margin-top",l),e(".first-screen__slide").css("height","calc(100vh - "+l+"px)"),e(".dash__first-screen").css("height","calc(100vh - "+l+"px)");e(".footer").height();o.matches&&e(".first-screen__slide").css("height","calc(60vh - "+l+"px)"),(s.matches||o.matches&&n.matches)&&e(".first-screen__slide").css("height","calc(100vh - "+l+"px)"),e("select").each(function(){var t=e(this),i=e(this).children("option").length;t.addClass("select-hidden"),t.wrap('<div class="select"></div>'),t.after('<div class="select-styled"></div>');var s=t.next("div.select-styled");s.text(t.children("option").eq(0).text());for(var o=e("<ul />",{class:"select-options"}).insertAfter(s),n=0;n<i;n++)e("<li />",{text:t.children("option").eq(n).text(),rel:t.children("option").eq(n).val()}).appendTo(o);var a=o.children("li");s.click(function(t){t.stopPropagation(),e("div.select-styled.active").not(this).each(function(){e(this).removeClass("active").next("ul.select-options").hide()}),e(this).toggleClass("active").next("ul.select-options").toggle()}),a.click(function(i){i.stopPropagation(),s.text(e(this).text()).removeClass("active"),t.val(e(this).attr("rel")),o.hide()}),e(document).click(function(){s.removeClass("active"),o.hide()})});e(".header").height();e(".first-screen__slider").slick({dots:!0,arrow:!1,slidesToShow:1,slidesToScroll:1,infinite:!0,slide:".first-screen .slide"}),e(".news-slider").slick({dots:!1,arrow:!0,slidesToShow:3,slidesToScroll:1,infinite:!0,slide:".news-slide",responsive:[{breakpoint:800,settings:{slidesToShow:2}},{breakpoint:577,settings:{slidesToShow:1}}]}),e("#reloadMoreNews").click(function(t){t.preventDefault(),e("#newsContent").append('<article class="news-box"><div class="row align-items-center"><div class="col-12 col-md-5"><a href="#" class="news-box__image"><img src="img/blog/image-6.png" alt=""><div class="news-box__date"><span>27</span><span>11</span><span>18</span></div></a></div><div class="col-12 col-md-7"><div class="news-box__desc"><a href="#">Конференция освежающие  потоки - большой зал </a><p>Открылась новая церковь в г. Черноморск. Всех желающих приглашаем на богослужение. Верим, что Господь Иисус Христос, Сын Божий пришел во плоти, одинаково как Б...</p></div></div></div></article>')}),t(),e(window).resize(function(){e(window).width()>767?e(".slider-watch-also").slick("unslick"):e(window).width()<=767&&t()}),e(".slider-photo").slick({dots:!1,arrow:!0,slidesToShow:4,slidesToScroll:1,infinite:!1,slide:".col-12",responsive:[{breakpoint:992,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:768,settings:{slidesToShow:2,slidesToScroll:1}},{breakpoint:577,settings:{slidesToShow:1,slidesToScroll:1}}]}),e(".slider-video").slick({dots:!1,arrow:!0,slidesToShow:3,slidesToScroll:1,infinite:!1,slide:".col-12",responsive:[{breakpoint:768,settings:{slidesToShow:2,slidesToScroll:1}},{breakpoint:577,settings:{slidesToShow:1,slidesToScroll:1}}]}),e(".resources-slider").slick({dots:!1,arrow:!0,slidesToShow:3,slidesToScroll:1,infinite:!1,slide:".col-12",responsive:[{breakpoint:768,settings:{slidesToShow:2,slidesToScroll:1}},{breakpoint:500,settings:{slidesToShow:1,slidesToScroll:1}}]});var c;e(".video-container__video").click(function(){c=e(this).data("src")}),e(".video-container__video").click(function(t){t.preventDefault(),e("#overlay").fadeIn(400,function(){e(".popup-video-open").css("display","block").animate({opacity:1,top:"50%"},200)}),e("#video").attr("src",c+"?autoplay=1")}),e(".modal_close, #overlay, .close").click(function(){e(".popup-video-open").animate({opacity:0,top:"45%"},200,function(){e(this).css("display","none"),e("#overlay").fadeOut(400)}),e("#video").attr("src",c)}),e(".calendar-event:nth-child(2n)").children(".calendar-event__information").addClass("order-2"),e(".calendar-event:nth-child(2n)").children(".calendar-event__date").addClass("order-1"),e(".calendar-event:odd").addClass("calendar-event__right"),e(".calendar-event:even").addClass("calendar-event__left"),s.matches&&(e(".calendar-event:odd").removeClass("calendar-event__right"),e(".calendar-event:even").removeClass("calendar-event__left"),e(".calendar-event:even").children(".calendar-event__information").addClass("order-2"),e(".calendar-event:even").children(".calendar-event__date").addClass("order-1")),e("#cc").inputmask({mask:"9999  9999  9999  9999",placeholder:"X"}),e("#month").inputmask({mask:"99",placeholder:"X"}),e("#year").inputmask({mask:"99",placeholder:"X"}),e("#cvv").inputmask({mask:"999",placeholder:"X"}),e("#bank").on("click",function(t){e(".donate__credit_card").slideToggle(),e(".donate__bank_account").is(":visible")&&e(".donate__bank_account").slideUp()}),e("#bil").on("click",function(){e(".donate__bank_account").slideToggle(),e(".donate__credit_card").is(":visible")&&e(".donate__credit_card").slideUp()}),e("#privat, #liqpay").on("click",function(){e(".payment-form").slideUp()}),e(".popup-gallery").magnificPopup({delegate:"a",type:"image",tLoading:"Loading image #%curr%...",mainClass:"mfp-img-mobile",gallery:{enabled:!0,navigateByImgClick:!0,preload:[0,1]},image:{tError:'<a href="%url%">The image #%curr%</a> could not be loaded.',titleSrc:function(e){return e.el.attr("title")}}})}),r(function(){if(document.getElementsByClassName)e=document.getElementsByClassName("youtube");else var e=function(e,t){for(var i=[],s=new RegExp("(^| )"+t+"( |$)"),o=e.getElementsByTagName("*"),n=0,a=o.length;n<a;n++)s.test(o[n].className)&&i.push(o[n]);return i}(document.body,"youtube");for(var t=e.length,i=0;i<t;i++){e[i].style.backgroundImage="url(http://i.ytimg.com/vi/"+e[i].id+"/sddefault.jpg)";var s=document.createElement("div");s.setAttribute("class","play"),e[i].appendChild(s),e[i].onclick=function(){var e=document.createElement("iframe"),t="https://www.youtube.com/embed/"+this.id+"?autoplay=1&autohide=1";this.getAttribute("data-params")&&(t+="&"+this.getAttribute("data-params")),e.setAttribute("src",t),e.setAttribute("frameborder","0"),e.style.width=this.style.width,e.style.height=this.style.height,this.parentNode.replaceChild(e,this)}}$(function(){function e(){$(".reload-more span img").removeClass("animate")}$("#reloadMoreNews").click(function(){$(".reload-more span img").addClass("animate"),setTimeout(e,6e3)})}),$(function(){function e(){$("#spinner").remove()}$(".page-pagination__link").click(function(){function t(){i.addClass("active")}var i=$(this);$(".page-pagination__link").hasClass("active")?($(".page-pagination__link").removeClass("active"),setTimeout(t,3e3)):setTimeout(t,3e3),$(this).next(".waiting-download").html('<svg id="spinner" width="174px" height="174px" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg"><circle class="path" fill="transparent" stroke-width="3.5" cx="33" cy="33" r="30" stroke="url(#gradient)"/><linearGradient id="gradient"><stop offset="50%" stop-color="#1d5c6f" stop-opacity="1"/><stop offset="65%" stop-color="#1d5c6f" stop-opacity=".7"/><stop offset="100%" stop-color="#1d5c6f" stop-opacity=".2"/></linearGradient></svg>'),setTimeout(e,3e3)})}),Plyr.setup(".player")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4ubWluLmpzIl0sIm5hbWVzIjpbInIiLCJmIiwidGVzdCIsImRvY3VtZW50IiwicmVhZHlTdGF0ZSIsInNldFRpbWVvdXQiLCIkIiwid2luZG93Iiwib24iLCJzY3JvbGxUb3AiLCJyZWFkeSIsInNsaWRlRGV0ZWN0Iiwic2xpY2siLCJkb3RzIiwiYXJyb3ciLCJzbGlkZXNUb1Nob3ciLCJzbGlkZXNUb1Njcm9sbCIsInJlc3BvbnNpdmUiLCJicmVha3BvaW50Iiwic2V0dGluZ3MiLCJpbmZpbml0ZSIsInNsaWRlIiwidmFsIiwiY2xpY2siLCJhZGRDbGFzcyIsImtleXVwIiwic2hvdyIsInJlbW92ZUNsYXNzIiwiaGlkZSIsIm1hdGNoTWVkaWEiLCJtcTk5MW1pbiIsIm1xNTc2IiwibXExMTAwIiwibXE5MDBoIiwibWF0Y2hlcyIsInRocyIsInRoaXMiLCJ0b2dnbGVDbGFzcyIsIm5vdCIsImVhY2giLCIka2V5IiwiJGl0ZW0iLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiZmFkZUluIiwiY3NzIiwiYW5pbWF0ZSIsIm9wYWNpdHkiLCJ0b3AiLCJmYWRlT3V0Iiwic2xpZGVUb2dnbGUiLCJtcTk5MSIsIkFjY29yZGlvbiIsImVsIiwibXVsdGlwbGUiLCJmaW5kIiwiZHJvcGRvd24iLCJwcm90b3R5cGUiLCJlIiwiJGVsIiwiZGF0YSIsIiR0aGlzIiwiJG5leHQiLCJuZXh0IiwicGFyZW50Iiwic2xpZGVVcCIsImhlaWdodEhlYWRlciIsImhlaWdodCIsIm51bWJlck9mT3B0aW9ucyIsImNoaWxkcmVuIiwibGVuZ3RoIiwid3JhcCIsImFmdGVyIiwiJHN0eWxlZFNlbGVjdCIsInRleHQiLCJlcSIsIiRsaXN0IiwiY2xhc3MiLCJpbnNlcnRBZnRlciIsImkiLCJyZWwiLCJhcHBlbmRUbyIsIiRsaXN0SXRlbXMiLCJzdG9wUHJvcGFnYXRpb24iLCJ0b2dnbGUiLCJhdHRyIiwiYXBwZW5kIiwicmVzaXplIiwid2lkdGgiLCJ2aWRlb1NyYyIsImlucHV0bWFzayIsIm1hc2siLCJwbGFjZWhvbGRlciIsImlzIiwibWFnbmlmaWNQb3B1cCIsImRlbGVnYXRlIiwidHlwZSIsInRMb2FkaW5nIiwibWFpbkNsYXNzIiwiZ2FsbGVyeSIsImVuYWJsZWQiLCJuYXZpZ2F0ZUJ5SW1nQ2xpY2siLCJwcmVsb2FkIiwiaW1hZ2UiLCJ0RXJyb3IiLCJ0aXRsZVNyYyIsIml0ZW0iLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwidmlkZW9zIiwibm9kZSIsImNsYXNzbmFtZSIsImEiLCJyZSIsIlJlZ0V4cCIsImVscyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiaiIsImNsYXNzTmFtZSIsInB1c2giLCJib2R5IiwibmJfdmlkZW9zIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJpZCIsInBsYXkiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiYXBwZW5kQ2hpbGQiLCJvbmNsaWNrIiwiaWZyYW1lIiwiaWZyYW1lX3VybCIsImdldEF0dHJpYnV0ZSIsInBhcmVudE5vZGUiLCJyZXBsYWNlQ2hpbGQiLCJSZW1vdmVDbGFzcyIsInJlbW92ZSIsImZpbmRMaW5rIiwiaGFzQ2xhc3MiLCJodG1sIiwiUGx5ciIsInNldHVwIl0sIm1hcHBpbmdzIjoiQUFzZkEsU0FBU0EsRUFBRUMsR0FBRyxLQUFLQyxLQUFLQyxTQUFTQyxZQUFZQyxXQUFXLEtBQUtKLEVBQUUsSUFBSSxHQUFHQSxJQXBmdEVLLEVBQUVDLFFBQVFDLEdBQUcsU0FBVSxXQUVORixFQUFFQyxRQUFRRSxjQUkzQkgsRUFBRUgsVUFBVU8sTUFBTSxTQUFVSixHQTZQeEIsU0FBU0ssSUFDTEwsRUFBRSxzQkFBc0JNLE9BQ3BCQyxNQUFNLEVBQ05DLE9BQU8sRUFDUEMsYUFBYyxFQUNkQyxlQUFnQixFQUNoQkMsYUFDSUMsV0FBWSxNQUNaQyxTQUFVLFlBR1ZELFdBQVksSUFDWkMsVUFDSUwsT0FBTyxFQUNQQyxhQUFjLEVBQ2RDLGVBQWdCLEVBQ2hCSSxVQUFVLEtBSWRGLFdBQVksSUFDWkMsVUFDSUos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akksRUFBRSwwQkFBMEJpQixNQUFNLFdBU3hCLFNBQVNDLElBQ0xnSCxFQUFTaEgsU0FBUyxVQVR0QixJQUFJZ0gsRUFBV2xJLEVBQUU4QixNQUNiOUIsRUFBRSwwQkFBMEJtSSxTQUFTLFdBQ3JDbkksRUFBRSwwQkFBMEJxQixZQUFZLFVBQ3hDdEIsV0FBV21CLEVBQVUsTUFHckJuQixXQUFXbUIsRUFBVSxLQUt6QmxCLEVBQUU4QixNQUFNMkIsS0FBSyxxQkFBcUIyRSxLQUFLLDJiQUNuQ3JJLFdBQVdpSSxFQUFhLFNBY3BDSyxLQUFLQyxNQUFNIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcblxyXG4kKHdpbmRvdykub24oJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB2YXIgc2Nyb2xsID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xyXG5cclxufSk7XHJcblxyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoJCkge1xyXG5cclxuICAgICQoXCIuc2VhcmNoVGVybVwiKS5vbihcImZvY3VzXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICQoXCIuc2VhcmNoVGVybVwiKS52YWwoXCJcIik7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcjc2VhcmNoTW9iJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJChcIiNzZWFyY2hNb2IsIC5zZWFyY2gtY2xvc2VcIikuYWRkQ2xhc3MoJ29wZW4nKTtcclxuICAgICAgICAkKCBcIiNzZWFyY2hNb2JcIiApLmtleXVwKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkKCcuc2VhcmNoLWNsZWFuJykuc2hvdygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnLnNlYXJjaC1jbG9zZScpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICQoXCIjc2VhcmNoTW9iLCAuc2VhcmNoLWNsb3NlXCIpLnJlbW92ZUNsYXNzKCdvcGVuJyk7XHJcbiAgICAgICAgJChcIiNzZWFyY2hNb2JcIikudmFsKFwiXCIpO1xyXG4gICAgICAgICQoJy5zZWFyY2gtY2xlYW4nKS5oaWRlKCk7XHJcblxyXG4gICAgfSk7XHJcblxyXG4gICAgJChcIi5zZWFyY2gtY2xlYW5cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAkKFwiI3NlYXJjaE1vYlwiKS52YWwoXCJcIik7XHJcbiAgICB9KTtcclxuICAgIFxyXG5cclxuICAgIC8vIEZJWEVEIE1FTlUgc3RhcnRcclxuICAgIHZhciBtcTEwMDBtaW4gPSB3aW5kb3cubWF0Y2hNZWRpYShcIihtaW4td2lkdGg6IDEwMDBweClcIik7XHJcbiAgICB2YXIgbXE5OTFtaW4gPSB3aW5kb3cubWF0Y2hNZWRpYShcIihtaW4td2lkdGg6IDk5MXB4KVwiKTtcclxuICAgIHZhciBtcTU3NiA9IHdpbmRvdy5tYXRjaE1lZGlhKFwiKG1heC13aWR0aDogNTc1LjhweClcIik7XHJcbiAgICB2YXIgbXExMTAwID0gd2luZG93Lm1hdGNoTWVkaWEoXCIobWF4LXdpZHRoOiAxMTAwcHgpXCIpO1xyXG4gICAgdmFyIG1xOTAwaCA9IHdpbmRvdy5tYXRjaE1lZGlhKFwiKG1heC1oZWlnaHQ6IDkwMHB4KVwiKTtcclxuXHJcbiAgICBpZiAobXE5OTFtaW4ubWF0Y2hlcykge1xyXG4gICAgICAgICQoJy5saW5rJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoJCh3aW5kb3cpLnNjcm9sbFRvcCgpIDwgMTAwKSB7XHJcblxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aHMgPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgJCh0aHMpLnRvZ2dsZUNsYXNzKCdoZWFkZXItbWVudS1vcGVuJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuaGVhZGVyLW1lbnUgaDMnKS5ub3QodGhpcykucmVtb3ZlQ2xhc3MoJ2hlYWRlci1tZW51LW9wZW4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgJCh3aW5kb3cpLm9uKCdzY3JvbGwnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICgkKHdpbmRvdykuc2Nyb2xsVG9wKCkgPCAxMDApIHtcclxuICAgICAgICAgICAgICAgICQoJy5saW5rJykuZWFjaChmdW5jdGlvbiAoJGtleSwgJGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCRpdGVtKS5yZW1vdmVDbGFzcygnaGVhZGVyLW1lbnUtb3BlbicpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgICQod2luZG93KS5vbignc2Nyb2xsJywgZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgaWYgKCQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpID4gMTAwKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuaGVhZGVyJykuYWRkQ2xhc3MoJ2hlYWRlci1maXhlZCcpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmhlYWRlci1idG4gLmJ0bicpLmFkZENsYXNzKCdjYWxlbmRhci1ub25lJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuaGVhZGVyLW1lbnUgdWwnKS5hZGRDbGFzcygnZGlzLW5vbmUnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQoJy5oZWFkZXInKS5yZW1vdmVDbGFzcygnaGVhZGVyLWZpeGVkJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuaGVhZGVyLW1lbnUgdWwnKS5yZW1vdmVDbGFzcygnZGlzLW5vbmUnKTtcclxuICAgICAgICAgICAgICAgICQoJy5oZWFkZXItYnRuIC5idG4nKS5yZW1vdmVDbGFzcygnY2FsZW5kYXItbm9uZScpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLy8gRklYRUQgTUVOVSBlbmRcclxuXHJcbiAgICAvLyBQT1BVUCBUSEFOS1Mgc3RhcnRcclxuICAgICQoJy5kb25hdGUtYnRuJykuY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKCcjb3ZlcmxheScpLmZhZGVJbig0MDAsXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQoJy5wb3B1cC10aGFua3MnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hbmltYXRlKHsgb3BhY2l0eTogMSwgdG9wOiAnNTAlJyB9LCAyMDApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgJCgnLm1vZGFsX2Nsb3NlLCAjb3ZlcmxheScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcucG9wdXAtdGhhbmtzJykuYW5pbWF0ZSh7IG9wYWNpdHk6IDAsIHRvcDogJzQ1JScgfSwgMjAwLFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcygnZGlzcGxheScsICdub25lJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcjb3ZlcmxheScpLmZhZGVPdXQoNDAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBQT1BVUCBUSEFOS1MgZW5kXHJcblxyXG4gICAgLy8gSFVNQlVSR0VSIE1FTlUgc3RhcnRcclxuICAgICQoJy5tZW51LXRvZ2dsZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdpcy1hY3RpdmUnKTtcclxuICAgICAgICAkKCcuaGVhZGVyLW5hdmlnYXRpb24nKS5zbGlkZVRvZ2dsZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdmFyIG1xOTkxID0gd2luZG93Lm1hdGNoTWVkaWEoXCIobWF4LXdpZHRoOiA5OTFweClcIik7XHJcblxyXG5cclxuICAgICQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChtcTk5MS5tYXRjaGVzKSB7XHJcbiAgICAgICAgICAgIHZhciBBY2NvcmRpb24gPSBmdW5jdGlvbiAoZWwsIG11bHRpcGxlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVsID0gZWwgfHwge307XHJcbiAgICAgICAgICAgICAgICB0aGlzLm11bHRpcGxlID0gbXVsdGlwbGUgfHwgZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gVmFyaWFibGVzIHByaXZhZGFzXHJcbiAgICAgICAgICAgICAgICB2YXIgbGlua3MgPSB0aGlzLmVsLmZpbmQoJy5saW5rJyk7XHJcbiAgICAgICAgICAgICAgICAvLyBFdmVudG9cclxuICAgICAgICAgICAgICAgIGxpbmtzLm9uKCdjbGljaycsIHsgZWw6IHRoaXMuZWwsIG11bHRpcGxlOiB0aGlzLm11bHRpcGxlIH0sIHRoaXMuZHJvcGRvd24pXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEFjY29yZGlvbi5wcm90b3R5cGUuZHJvcGRvd24gPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyICRlbCA9IGUuZGF0YS5lbDtcclxuICAgICAgICAgICAgICAgICR0aGlzID0gJCh0aGlzKSxcclxuICAgICAgICAgICAgICAgICAgICAkbmV4dCA9ICR0aGlzLm5leHQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkbmV4dC5zbGlkZVRvZ2dsZSgpO1xyXG4gICAgICAgICAgICAgICAgJHRoaXMucGFyZW50KCkudG9nZ2xlQ2xhc3MoJ29wZW4nKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWUuZGF0YS5tdWx0aXBsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRlbC5maW5kKCcuc3VibWVudScpLm5vdCgkbmV4dCkuc2xpZGVVcCgpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCdvcGVuJyk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgYWNjb3JkaW9uID0gbmV3IEFjY29yZGlvbigkKCcjYWNjb3JkaW9uJyksIGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBIVU1CVVJHRVIgTUVOVSBlbmRcclxuXHJcblxyXG4gICAgLy8gU1RZTEUgRk9SIE1BSU4gc3RhcnRcclxuICAgIHZhciBoZWlnaHRIZWFkZXIgPSAkKCcuaGVhZGVyJykuaGVpZ2h0KCk7XHJcbiAgICAkKCcubWFpbicpLmNzcygnbWFyZ2luLXRvcCcsIGhlaWdodEhlYWRlcik7XHJcbiAgICAkKCcuZmlyc3Qtc2NyZWVuX19zbGlkZScpLmNzcygnaGVpZ2h0JywgJ2NhbGMoMTAwdmggLSAnICsgaGVpZ2h0SGVhZGVyICsgJ3B4KScpO1xyXG4gICAgJCgnLmRhc2hfX2ZpcnN0LXNjcmVlbicpLmNzcygnaGVpZ2h0JywgJ2NhbGMoMTAwdmggLSAnICsgaGVpZ2h0SGVhZGVyICsgJ3B4KScpO1xyXG4gICAgdmFyIGhlaWdodEZvb3RlciA9ICQoJy5mb290ZXInKS5oZWlnaHQoKTtcclxuXHJcbiAgICAgaWYgKG1xMTEwMC5tYXRjaGVzKSB7XHJcbiAgICAgICAgICQoJy5maXJzdC1zY3JlZW5fX3NsaWRlJykuY3NzKCdoZWlnaHQnLCAnY2FsYyg2MHZoIC0gJyArIGhlaWdodEhlYWRlciArICdweCknKTtcclxuICAgICB9XHJcblxyXG4gICAgIGlmIChtcTU3Ni5tYXRjaGVzIHx8IChtcTExMDAubWF0Y2hlcyAmJiBtcTkwMGgubWF0Y2hlcykpIHtcclxuICAgICAgICAgJCgnLmZpcnN0LXNjcmVlbl9fc2xpZGUnKS5jc3MoJ2hlaWdodCcsICdjYWxjKDEwMHZoIC0gJyArIGhlaWdodEhlYWRlciArICdweCknKTtcclxuICAgICB9XHJcblxyXG4vLyBTVFlMRSBGT1IgTUFJTiBlbmRcclxuXHJcblxyXG4gICAgLy8gU0VMRUNUIFNUWUxFIHN0YXJ0XHJcbiAgICAkKCdzZWxlY3QnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKSwgbnVtYmVyT2ZPcHRpb25zID0gJCh0aGlzKS5jaGlsZHJlbignb3B0aW9uJykubGVuZ3RoO1xyXG5cclxuICAgICAgICAkdGhpcy5hZGRDbGFzcygnc2VsZWN0LWhpZGRlbicpO1xyXG4gICAgICAgICR0aGlzLndyYXAoJzxkaXYgY2xhc3M9XCJzZWxlY3RcIj48L2Rpdj4nKTtcclxuICAgICAgICAkdGhpcy5hZnRlcignPGRpdiBjbGFzcz1cInNlbGVjdC1zdHlsZWRcIj48L2Rpdj4nKTtcclxuXHJcbiAgICAgICAgdmFyICRzdHlsZWRTZWxlY3QgPSAkdGhpcy5uZXh0KCdkaXYuc2VsZWN0LXN0eWxlZCcpO1xyXG4gICAgICAgICRzdHlsZWRTZWxlY3QudGV4dCgkdGhpcy5jaGlsZHJlbignb3B0aW9uJykuZXEoMCkudGV4dCgpKTtcclxuXHJcbiAgICAgICAgdmFyICRsaXN0ID0gJCgnPHVsIC8+Jywge1xyXG4gICAgICAgICAgICAnY2xhc3MnOiAnc2VsZWN0LW9wdGlvbnMnXHJcbiAgICAgICAgfSkuaW5zZXJ0QWZ0ZXIoJHN0eWxlZFNlbGVjdCk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtYmVyT2ZPcHRpb25zOyBpKyspIHtcclxuICAgICAgICAgICAgJCgnPGxpIC8+Jywge1xyXG4gICAgICAgICAgICAgICAgdGV4dDogJHRoaXMuY2hpbGRyZW4oJ29wdGlvbicpLmVxKGkpLnRleHQoKSxcclxuICAgICAgICAgICAgICAgIHJlbDogJHRoaXMuY2hpbGRyZW4oJ29wdGlvbicpLmVxKGkpLnZhbCgpXHJcbiAgICAgICAgICAgIH0pLmFwcGVuZFRvKCRsaXN0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciAkbGlzdEl0ZW1zID0gJGxpc3QuY2hpbGRyZW4oJ2xpJyk7XHJcblxyXG4gICAgICAgICRzdHlsZWRTZWxlY3QuY2xpY2soZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgJCgnZGl2LnNlbGVjdC1zdHlsZWQuYWN0aXZlJykubm90KHRoaXMpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnYWN0aXZlJykubmV4dCgndWwuc2VsZWN0LW9wdGlvbnMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKS5uZXh0KCd1bC5zZWxlY3Qtb3B0aW9ucycpLnRvZ2dsZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkbGlzdEl0ZW1zLmNsaWNrKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICRzdHlsZWRTZWxlY3QudGV4dCgkKHRoaXMpLnRleHQoKSkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAkdGhpcy52YWwoJCh0aGlzKS5hdHRyKCdyZWwnKSk7XHJcbiAgICAgICAgICAgICRsaXN0LmhpZGUoKTtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygkdGhpcy52YWwoKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoZG9jdW1lbnQpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJHN0eWxlZFNlbGVjdC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICRsaXN0LmhpZGUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgLy8gU0VMRUNUIFNUWUxFIGVuZFxyXG5cclxuXHJcbiAgICB2YXIgaGVhZGVySGVpZ2h0ID0gJCgnLmhlYWRlcicpLmhlaWdodCgpO1xyXG4gICAgLy8gJCgnLmZpcnN0LXNjcmVlbl9fc2xpZGUnKS5jc3Moe1xyXG4gICAgLy8gICAgICdtYXJnaW4tdG9wJzogaGVhZGVySGVpZ2h0LFxyXG4gICAgLy8gICAgICdoZWlnaHQnOiAnY2FsYygxMDB2aCAtICcraGVhZGVySGVpZ2h0KycpJ1xyXG4gICAgLy8gfSk7XHJcblxyXG4gICAgLy8gU0xJREVSIEZJUlNUIFNDUkVFTiBzdGFydFxyXG4gICAgJCgnLmZpcnN0LXNjcmVlbl9fc2xpZGVyJykuc2xpY2soe1xyXG4gICAgICAgIGRvdHM6IHRydWUsXHJcbiAgICAgICAgYXJyb3c6IGZhbHNlLFxyXG4gICAgICAgIHNsaWRlc1RvU2hvdzogMSxcclxuICAgICAgICBzbGlkZXNUb1Njcm9sbDogMSxcclxuICAgICAgICBpbmZpbml0ZTogdHJ1ZSxcclxuICAgICAgICBzbGlkZTogXCIuZmlyc3Qtc2NyZWVuIC5zbGlkZVwiLFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gU0xJREVSIEZJUlNUIFNDUkVFTiBlbmRcclxuXHJcbiAgICAvLyBTTElERVIgTkVXUyBIT01FIHN0YXJ0XHJcbiAgICAkKCcubmV3cy1zbGlkZXInKS5zbGljayh7XHJcbiAgICAgICAgZG90czogZmFsc2UsXHJcbiAgICAgICAgYXJyb3c6IHRydWUsXHJcbiAgICAgICAgc2xpZGVzVG9TaG93OiAzLFxyXG4gICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxLFxyXG4gICAgICAgIGluZmluaXRlOiB0cnVlLFxyXG4gICAgICAgIHNsaWRlOiBcIi5uZXdzLXNsaWRlXCIsXHJcbiAgICAgICAgcmVzcG9uc2l2ZTogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBicmVha3BvaW50OiA4MDAsXHJcbiAgICAgICAgICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMixcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYnJlYWtwb2ludDogNTc3LFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDEsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBTTElERVIgTkVXUyBIT01FIGVuZFxyXG5cclxuXHJcblxyXG4gICAgJCgnI3JlbG9hZE1vcmVOZXdzJykuY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKCcjbmV3c0NvbnRlbnQnKS5hcHBlbmQoJzxhcnRpY2xlIGNsYXNzPVwibmV3cy1ib3hcIj48ZGl2IGNsYXNzPVwicm93IGFsaWduLWl0ZW1zLWNlbnRlclwiPjxkaXYgY2xhc3M9XCJjb2wtMTIgY29sLW1kLTVcIj48YSBocmVmPVwiI1wiIGNsYXNzPVwibmV3cy1ib3hfX2ltYWdlXCI+PGltZyBzcmM9XCJpbWcvYmxvZy9pbWFnZS02LnBuZ1wiIGFsdD1cIlwiPjxkaXYgY2xhc3M9XCJuZXdzLWJveF9fZGF0ZVwiPjxzcGFuPjI3PC9zcGFuPjxzcGFuPjExPC9zcGFuPjxzcGFuPjE4PC9zcGFuPjwvZGl2PjwvYT48L2Rpdj48ZGl2IGNsYXNzPVwiY29sLTEyIGNvbC1tZC03XCI+PGRpdiBjbGFzcz1cIm5ld3MtYm94X19kZXNjXCI+PGEgaHJlZj1cIiNcIj7QmtC+0L3RhNC10YDQtdC90YbQuNGPINC+0YHQstC10LbQsNGO0YnQuNC1ICDQv9C+0YLQvtC60LggLSDQsdC+0LvRjNGI0L7QuSDQt9Cw0LsgPC9hPjxwPtCe0YLQutGA0YvQu9Cw0YHRjCDQvdC+0LLQsNGPINGG0LXRgNC60L7QstGMINCyINCzLiDQp9C10YDQvdC+0LzQvtGA0YHQui4g0JLRgdC10YUg0LbQtdC70LDRjtGJ0LjRhSDQv9GA0LjQs9C70LDRiNCw0LXQvCDQvdCwINCx0L7Qs9C+0YHQu9GD0LbQtdC90LjQtS4g0JLQtdGA0LjQvCwg0YfRgtC+INCT0L7RgdC/0L7QtNGMINCY0LjRgdGD0YEg0KXRgNC40YHRgtC+0YEsINCh0YvQvSDQkdC+0LbQuNC5INC/0YDQuNGI0LXQuyDQstC+INC/0LvQvtGC0LgsINC+0LTQuNC90LDQutC+0LLQviDQutCw0Log0JEuLi48L3A+PC9kaXY+PC9kaXY+PC9kaXY+PC9hcnRpY2xlPicpO1xyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIC8vIHNsaWRlciBzbGlkZXItd2F0Y2gtYWxzbyBzdGFydFxyXG4gICAgZnVuY3Rpb24gc2xpZGVEZXRlY3QoKSB7XHJcbiAgICAgICAgJCgnLnNsaWRlci13YXRjaC1hbHNvJykuc2xpY2soe1xyXG4gICAgICAgICAgICBkb3RzOiBmYWxzZSxcclxuICAgICAgICAgICAgYXJyb3c6IGZhbHNlLFxyXG4gICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDMsXHJcbiAgICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxLFxyXG4gICAgICAgICAgICByZXNwb25zaXZlOiBbe1xyXG4gICAgICAgICAgICAgICAgYnJlYWtwb2ludDogOTk5OTksXHJcbiAgICAgICAgICAgICAgICBzZXR0aW5nczogXCJ1bnNsaWNrXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYnJlYWtwb2ludDogNzY4LFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgICAgICAgICBhcnJvdzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDIsXHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgaW5maW5pdGU6IHRydWVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYnJlYWtwb2ludDogNTc3LFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgaW5maW5pdGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGU6IFwiLmNvbC0xMlwiXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNsaWRlRGV0ZWN0KCk7XHJcblxyXG4gICAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpID4gNzY3KSB7XHJcbiAgICAgICAgICAgICQoJy5zbGlkZXItd2F0Y2gtYWxzbycpLnNsaWNrKCd1bnNsaWNrJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCQod2luZG93KS53aWR0aCgpIDw9IDc2Nykge1xyXG4gICAgICAgICAgICBzbGlkZURldGVjdCgpXHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAvLyBzbGlkZXIgc2xpZGVyLXdhdGNoLWFsc28gZW5kXHJcblxyXG5cclxuICAgIC8vIHNsaWRlciBwYWdlIGNodXJjaF9zZXJ2aWNlcy1vcGVuIHN0YXJ0XHJcbiAgICAkKCcuc2xpZGVyLXBob3RvJykuc2xpY2soe1xyXG4gICAgICAgIGRvdHM6IGZhbHNlLFxyXG4gICAgICAgIGFycm93OiB0cnVlLFxyXG4gICAgICAgIHNsaWRlc1RvU2hvdzogNCxcclxuICAgICAgICBzbGlkZXNUb1Njcm9sbDogMSxcclxuICAgICAgICBpbmZpbml0ZTogZmFsc2UsXHJcbiAgICAgICAgc2xpZGU6IFwiLmNvbC0xMlwiLFxyXG4gICAgICAgIHJlc3BvbnNpdmU6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYnJlYWtwb2ludDogOTkyLFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDMsXHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDFcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYnJlYWtwb2ludDogNzY4LFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDIsXHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDFcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYnJlYWtwb2ludDogNTc3LFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDFcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIF1cclxuICAgIH0pO1xyXG5cclxuICAgICQoJy5zbGlkZXItdmlkZW8nKS5zbGljayh7XHJcbiAgICAgICAgZG90czogZmFsc2UsXHJcbiAgICAgICAgYXJyb3c6IHRydWUsXHJcbiAgICAgICAgc2xpZGVzVG9TaG93OiAzLFxyXG4gICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxLFxyXG4gICAgICAgIGluZmluaXRlOiBmYWxzZSxcclxuICAgICAgICBzbGlkZTogXCIuY29sLTEyXCIsXHJcbiAgICAgICAgcmVzcG9uc2l2ZTogW3tcclxuICAgICAgICAgICAgYnJlYWtwb2ludDogNzY4LFxyXG4gICAgICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAyLFxyXG4gICAgICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDFcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBicmVha3BvaW50OiA1NzcsXHJcbiAgICAgICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDEsXHJcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogMVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF1cclxuICAgIH0pO1xyXG4gICAgLy8gc2xpZGVyIHBhZ2UgY2h1cmNoX3NlcnZpY2VzLW9wZW4gZW5kXHJcblxyXG4gICAgLy8gc2xpZGVyIHBhZ2UgcmVzb3VyY2VzXHJcbiAgICAkKCcucmVzb3VyY2VzLXNsaWRlcicpLnNsaWNrKHtcclxuICAgICAgICBkb3RzOiBmYWxzZSxcclxuICAgICAgICBhcnJvdzogdHJ1ZSxcclxuICAgICAgICBzbGlkZXNUb1Nob3c6IDMsXHJcbiAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDEsXHJcbiAgICAgICAgaW5maW5pdGU6IGZhbHNlLFxyXG4gICAgICAgIHNsaWRlOiBcIi5jb2wtMTJcIixcclxuICAgICAgICByZXNwb25zaXZlOiBbe1xyXG4gICAgICAgICAgICBicmVha3BvaW50OiA3NjgsXHJcbiAgICAgICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDIsXHJcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogMVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDUwMCxcclxuICAgICAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMSxcclxuICAgICAgICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gUE9QVVAgdmlkZW8tb3BlbiBzdGFydFxyXG5cclxuICAgIHZhciB2aWRlb1NyYzsgIFxyXG4gICAgJCgnLnZpZGVvLWNvbnRhaW5lcl9fdmlkZW8nKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgICB2aWRlb1NyYyA9ICQodGhpcykuZGF0YSggXCJzcmNcIiApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnLnZpZGVvLWNvbnRhaW5lcl9fdmlkZW8nKS5jbGljayhmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQoJyNvdmVybGF5JykuZmFkZUluKDQwMCxcclxuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCgnLnBvcHVwLXZpZGVvLW9wZW4nKVxyXG4gICAgICAgICAgICAgICAgICAgIC5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hbmltYXRlKHsgb3BhY2l0eTogMSwgdG9wOiAnNTAlJyB9LCAyMDApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAkKFwiI3ZpZGVvXCIpLmF0dHIoJ3NyYycsdmlkZW9TcmMgKyBcIj9hdXRvcGxheT0xXCIgKTsgXHJcbiAgICB9KTtcclxuICAgICQoJy5tb2RhbF9jbG9zZSwgI292ZXJsYXksIC5jbG9zZScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcucG9wdXAtdmlkZW8tb3BlbicpLmFuaW1hdGUoeyBvcGFjaXR5OiAwLCB0b3A6ICc0NSUnIH0sIDIwMCxcclxuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xyXG4gICAgICAgICAgICAgICAgJCgnI292ZXJsYXknKS5mYWRlT3V0KDQwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgICAgICQoXCIjdmlkZW9cIikuYXR0cignc3JjJyx2aWRlb1NyYyk7IFxyXG4gICAgfSk7XHJcbiAgICAvLyBQT1BVUCB2aWRlby1vcGVuIGVuZFxyXG4gICAgIFxyXG5cclxuXHJcbi8vIENBTEVOREFSIHN0YXJ0XHJcbiAgICBcclxuICAgICQoJy5jYWxlbmRhci1ldmVudDpudGgtY2hpbGQoMm4pJykuY2hpbGRyZW4oXCIuY2FsZW5kYXItZXZlbnRfX2luZm9ybWF0aW9uXCIpLmFkZENsYXNzKCdvcmRlci0yJyk7XHJcbiAgICAkKCcuY2FsZW5kYXItZXZlbnQ6bnRoLWNoaWxkKDJuKScpLmNoaWxkcmVuKFwiLmNhbGVuZGFyLWV2ZW50X19kYXRlXCIpLmFkZENsYXNzKCdvcmRlci0xJyk7XHJcblxyXG4gICAgJCgnLmNhbGVuZGFyLWV2ZW50Om9kZCcpLmFkZENsYXNzKCdjYWxlbmRhci1ldmVudF9fcmlnaHQnKTtcclxuICAgICQoJy5jYWxlbmRhci1ldmVudDpldmVuJykuYWRkQ2xhc3MoJ2NhbGVuZGFyLWV2ZW50X19sZWZ0Jyk7XHJcblxyXG5cclxuICAgIGlmIChtcTU3Ni5tYXRjaGVzKSB7XHJcbiAgICAgICAgJCgnLmNhbGVuZGFyLWV2ZW50Om9kZCcpLnJlbW92ZUNsYXNzKCdjYWxlbmRhci1ldmVudF9fcmlnaHQnKTtcclxuICAgICAgICAkKCcuY2FsZW5kYXItZXZlbnQ6ZXZlbicpLnJlbW92ZUNsYXNzKCdjYWxlbmRhci1ldmVudF9fbGVmdCcpO1xyXG5cclxuICAgICAgICAkKCcuY2FsZW5kYXItZXZlbnQ6ZXZlbicpLmNoaWxkcmVuKFwiLmNhbGVuZGFyLWV2ZW50X19pbmZvcm1hdGlvblwiKS5hZGRDbGFzcygnb3JkZXItMicpO1xyXG4gICAgICAgICQoJy5jYWxlbmRhci1ldmVudDpldmVuJykuY2hpbGRyZW4oXCIuY2FsZW5kYXItZXZlbnRfX2RhdGVcIikuYWRkQ2xhc3MoJ29yZGVyLTEnKTtcclxuICAgIH1cclxuXHJcbi8vIENBTEVOREFSIGVuZFxyXG5cclxuXHJcbiAgICAkKFwiI2NjXCIpLmlucHV0bWFzayh7XHJcbiAgICAgICAgbWFzazogJzk5OTkgIDk5OTkgIDk5OTkgIDk5OTknLFxyXG4gICAgICAgIHBsYWNlaG9sZGVyOiAnWCdcclxuICAgIH0pO1xyXG5cclxuICAgICQoXCIjbW9udGhcIikuaW5wdXRtYXNrKHtcclxuICAgICAgICBtYXNrOiAnOTknLFxyXG4gICAgICAgIHBsYWNlaG9sZGVyOiAnWCdcclxuICAgIH0pO1xyXG5cclxuICAgICQoXCIjeWVhclwiKS5pbnB1dG1hc2soe1xyXG4gICAgICAgIG1hc2s6ICc5OScsXHJcbiAgICAgICAgcGxhY2Vob2xkZXI6ICdYJ1xyXG4gICAgfSk7XHJcblxyXG4gICAgJChcIiNjdnZcIikuaW5wdXRtYXNrKHtcclxuICAgICAgICBtYXNrOiAnOTk5JyxcclxuICAgICAgICBwbGFjZWhvbGRlcjogJ1gnXHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgJCgnI2JhbmsnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICQoJy5kb25hdGVfX2NyZWRpdF9jYXJkJykuc2xpZGVUb2dnbGUoKTtcclxuICAgICAgICBpZiAoJCgnLmRvbmF0ZV9fYmFua19hY2NvdW50JykuaXMoXCI6dmlzaWJsZVwiKSkge1xyXG4gICAgICAgICAgICAkKCcuZG9uYXRlX19iYW5rX2FjY291bnQnKS5zbGlkZVVwKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAkKCcjYmlsJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5kb25hdGVfX2JhbmtfYWNjb3VudCcpLnNsaWRlVG9nZ2xlKCk7XHJcbiAgICAgICAgaWYgKCQoJy5kb25hdGVfX2NyZWRpdF9jYXJkJykuaXMoXCI6dmlzaWJsZVwiKSkge1xyXG4gICAgICAgICAgICAkKCcuZG9uYXRlX19jcmVkaXRfY2FyZCcpLnNsaWRlVXAoKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcjcHJpdmF0LCAjbGlxcGF5Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5wYXltZW50LWZvcm0nKS5zbGlkZVVwKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBcclxuICAgICQoJy5wb3B1cC1nYWxsZXJ5JykubWFnbmlmaWNQb3B1cCh7XHJcbiAgICAgICAgZGVsZWdhdGU6ICdhJyxcclxuICAgICAgICB0eXBlOiAnaW1hZ2UnLFxyXG4gICAgICAgIHRMb2FkaW5nOiAnTG9hZGluZyBpbWFnZSAjJWN1cnIlLi4uJyxcclxuICAgICAgICBtYWluQ2xhc3M6ICdtZnAtaW1nLW1vYmlsZScsXHJcbiAgICAgICAgZ2FsbGVyeToge1xyXG4gICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxyXG4gICAgICAgICAgICBuYXZpZ2F0ZUJ5SW1nQ2xpY2s6IHRydWUsXHJcbiAgICAgICAgICAgIHByZWxvYWQ6IFswLDFdIC8vIFdpbGwgcHJlbG9hZCAwIC0gYmVmb3JlIGN1cnJlbnQsIGFuZCAxIGFmdGVyIHRoZSBjdXJyZW50IGltYWdlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBpbWFnZToge1xyXG4gICAgICAgICAgICB0RXJyb3I6ICc8YSBocmVmPVwiJXVybCVcIj5UaGUgaW1hZ2UgIyVjdXJyJTwvYT4gY291bGQgbm90IGJlIGxvYWRlZC4nLFxyXG4gICAgICAgICAgICB0aXRsZVNyYzogZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uZWwuYXR0cigndGl0bGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuXHJcbn0pO1xyXG5cclxuXHJcbi8vIFlPVVRVQkUgdmlkZW9cclxuXHJcbmZ1bmN0aW9uIHIoZil7L2luLy50ZXN0KGRvY3VtZW50LnJlYWR5U3RhdGUpP3NldFRpbWVvdXQoJ3IoJytmKycpJyw5KTpmKCl9XHJcbnIoZnVuY3Rpb24oKXtcclxuICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSkge1xyXG4gICAgICAgIC8vINCf0L7QtNC00LXRgNC20LrQsCBJRThcclxuICAgICAgICB2YXIgZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSA9IGZ1bmN0aW9uKG5vZGUsIGNsYXNzbmFtZSkge1xyXG4gICAgICAgICAgICB2YXIgYSA9IFtdO1xyXG4gICAgICAgICAgICB2YXIgcmUgPSBuZXcgUmVnRXhwKCcoXnwgKScrY2xhc3NuYW1lKycoIHwkKScpO1xyXG4gICAgICAgICAgICB2YXIgZWxzID0gbm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIik7XHJcbiAgICAgICAgICAgIGZvcih2YXIgaT0wLGo9ZWxzLmxlbmd0aDsgaTxqOyBpKyspXHJcbiAgICAgICAgICAgICAgICBpZihyZS50ZXN0KGVsc1tpXS5jbGFzc05hbWUpKWEucHVzaChlbHNbaV0pO1xyXG4gICAgICAgICAgICByZXR1cm4gYTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHZpZGVvcyA9IGdldEVsZW1lbnRzQnlDbGFzc05hbWUoZG9jdW1lbnQuYm9keSxcInlvdXR1YmVcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciB2aWRlb3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwieW91dHViZVwiKTtcclxuICAgIH1cclxuIFxyXG4gICAgdmFyIG5iX3ZpZGVvcyA9IHZpZGVvcy5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciBpPTA7IGk8bmJfdmlkZW9zOyBpKyspIHtcclxuICAgICAgICAvLyDQndCw0YXQvtC00LjQvCDQv9C+0YHRgtC10YAg0LTQu9GPINCy0LjQtNC10L4sINC30L3QsNGPIElEINC90LDRiNC10LPQviDQstC40LTQtdC+XHJcbiAgICAgICAgdmlkZW9zW2ldLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoaHR0cDovL2kueXRpbWcuY29tL3ZpLycgKyB2aWRlb3NbaV0uaWQgKyAnL3NkZGVmYXVsdC5qcGcpJztcclxuIFxyXG4gICAgICAgIC8vINCg0LDQt9C80LXRidCw0LXQvCDQvdCw0LQg0L/QvtGB0YLQtdGA0L7QvCDQutC90L7Qv9C60YMgUGxheSwg0YfRgtC+0LHRiyDRgdC+0LfQtNCw0YLRjCDRjdGE0YTQtdC60YIg0L/Qu9C10LXRgNCwXHJcbiAgICAgICAgdmFyIHBsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHBsYXkuc2V0QXR0cmlidXRlKFwiY2xhc3NcIixcInBsYXlcIik7XHJcbiAgICAgICAgdmlkZW9zW2ldLmFwcGVuZENoaWxkKHBsYXkpO1xyXG4gXHJcbiAgICAgICAgdmlkZW9zW2ldLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgLy8g0KHQvtC30LTQsNC10LwgaUZyYW1lINC4INGB0YDQsNC30YMg0L3QsNGH0LjQvdCw0LXQvCDQv9GA0L7QuNCz0YDRi9Cy0LDRgtGMINCy0LjQtNC10L4sINGCLtC1LiDQsNGC0YDQuNCx0YPRgiBhdXRvcGxheSDRgyDQstC40LTQtdC+INCyINC30L3QsNGH0LXQvdC40LggMVxyXG4gICAgICAgICAgICB2YXIgaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKTtcclxuICAgICAgICAgICAgdmFyIGlmcmFtZV91cmwgPSBcImh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkL1wiICsgdGhpcy5pZCArIFwiP2F1dG9wbGF5PTEmYXV0b2hpZGU9MVwiO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLXBhcmFtc1wiKSkgaWZyYW1lX3VybCs9JyYnK3RoaXMuZ2V0QXR0cmlidXRlKFwiZGF0YS1wYXJhbXNcIik7XHJcbiAgICAgICAgICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoXCJzcmNcIixpZnJhbWVfdXJsKTtcclxuICAgICAgICAgICAgaWZyYW1lLnNldEF0dHJpYnV0ZShcImZyYW1lYm9yZGVyXCIsJzAnKTtcclxuIFxyXG4gICAgICAgICAgICAvLyDQktGL0YHQvtGC0LAg0Lgg0YjQuNGA0LjQvdCwIGlGcmFtZSDQsdGD0LTQtdGCINC60LDQuiDRgyDRjdC70LXQvNC10L3RgtCwLdGA0L7QtNC40YLQtdC70Y9cclxuICAgICAgICAgICAgaWZyYW1lLnN0eWxlLndpZHRoICA9IHRoaXMuc3R5bGUud2lkdGg7XHJcbiAgICAgICAgICAgIGlmcmFtZS5zdHlsZS5oZWlnaHQgPSB0aGlzLnN0eWxlLmhlaWdodDtcclxuIFxyXG4gICAgICAgICAgICAvLyDQl9Cw0LzQtdC90Y/QtdC8INC90LDRh9Cw0LvRjNC90L7QtSDQuNC30L7QsdGA0LDQttC10L3QuNC1ICjQv9C+0YHRgtC10YApINC90LAgaUZyYW1lXHJcbiAgICAgICAgICAgIHRoaXMucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoaWZyYW1lLCB0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4vLyBZT1VUVUJFIHZpZGVvXHJcblxyXG4gICAgJChmdW5jdGlvbigpe1xyXG5cdFx0JCgnI3JlbG9hZE1vcmVOZXdzJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcucmVsb2FkLW1vcmUgc3BhbiBpbWcnKS5hZGRDbGFzcyhcImFuaW1hdGVcIik7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoUmVtb3ZlQ2xhc3MsIDYwMDApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZnVuY3Rpb24gUmVtb3ZlQ2xhc3MoKSB7XHJcbiAgICAgICAgICAgICQoJy5yZWxvYWQtbW9yZSBzcGFuIGltZycpLnJlbW92ZUNsYXNzKFwiYW5pbWF0ZVwiKTtcclxuXHRcdH1cclxuICAgIH0pO1xyXG4gICAgXHJcblxyXG4gICAgLy8gd2FpdGluZyBkb3dubG9hZCBwYWdpbmF0aW9uXHJcbiAgICAkKGZ1bmN0aW9uKCl7XHJcblx0XHQkKCcucGFnZS1wYWdpbmF0aW9uX19saW5rJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZmluZExpbmsgPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICBpZiAoJCgnLnBhZ2UtcGFnaW5hdGlvbl9fbGluaycpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnLnBhZ2UtcGFnaW5hdGlvbl9fbGluaycpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoYWRkQ2xhc3MsIDMwMDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChhZGRDbGFzcywgMzAwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZnVuY3Rpb24gYWRkQ2xhc3MoKSB7XHJcbiAgICAgICAgICAgICAgICBmaW5kTGluay5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJCh0aGlzKS5uZXh0KCcud2FpdGluZy1kb3dubG9hZCcpLmh0bWwoJzxzdmcgaWQ9XCJzcGlubmVyXCIgd2lkdGg9XCIxNzRweFwiIGhlaWdodD1cIjE3NHB4XCIgdmlld0JveD1cIjAgMCA2NiA2NlwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48Y2lyY2xlIGNsYXNzPVwicGF0aFwiIGZpbGw9XCJ0cmFuc3BhcmVudFwiIHN0cm9rZS13aWR0aD1cIjMuNVwiIGN4PVwiMzNcIiBjeT1cIjMzXCIgcj1cIjMwXCIgc3Ryb2tlPVwidXJsKCNncmFkaWVudClcIi8+PGxpbmVhckdyYWRpZW50IGlkPVwiZ3JhZGllbnRcIj48c3RvcCBvZmZzZXQ9XCI1MCVcIiBzdG9wLWNvbG9yPVwiIzFkNWM2ZlwiIHN0b3Atb3BhY2l0eT1cIjFcIi8+PHN0b3Agb2Zmc2V0PVwiNjUlXCIgc3RvcC1jb2xvcj1cIiMxZDVjNmZcIiBzdG9wLW9wYWNpdHk9XCIuN1wiLz48c3RvcCBvZmZzZXQ9XCIxMDAlXCIgc3RvcC1jb2xvcj1cIiMxZDVjNmZcIiBzdG9wLW9wYWNpdHk9XCIuMlwiLz48L2xpbmVhckdyYWRpZW50Pjwvc3ZnPicpO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChSZW1vdmVDbGFzcywgMzAwMCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBSZW1vdmVDbGFzcygpIHtcclxuICAgICAgICAgICAgICAgICQoJyNzcGlubmVyJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICB9KTsgXHJcblxyXG5cclxuICBcclxuXHJcblxyXG5cclxuLy8gQVVESU8gc3R5bGVcclxuICAgIFBseXIuc2V0dXAoJy5wbGF5ZXInKTtcclxuLy8gQVVESU8gc3R5bGVcclxuXHJcblxyXG59KTsiXX0=
